import{o as a,c as i,w as e,a as t,b as d,t as s,d as l,r as o,F as n,e as f,f as u,i as c,g as m,p as v}from"./index.6a69d336.js";import{_ as r}from"./my-video-card.5f11d300.js";import{r as p}from"./uni-app.es.c55df1fc.js";import{_}from"./plugin-vue_export-helper.21dcd24c.js";var y=_({data(){return{apis:{getVideoInfo:()=>{let a={url:`https://www.bilibili.com/video/${this.bvid}/`};return this.PB.apiRoute("/api/bili/base/getInitialState",a,"POST")}},aid:null,bvid:null,videoInfo:null,videoPageList:[]}},onLoad(a){this.aid=a.aid,this.bvid=a.bvid,this.init()},computed:{loadImg(){return a=>this.PB.loadImg(a)},shortNumForBoFang:()=>a=>a<1e4?a:(a/1e4).toFixed(1)+"万"},methods:{init(){this.PB.ajax(this.apis.getVideoInfo(),{cacheKey:this.aid+"_getVideoInfo",cacheTime:10}).then((a=>{this.videoInfo=a.data,this.getVideoPages(),console.log("videoInfo:",this.videoInfo),console.log("videoPageList:",this.videoPageList)}))},getVideoPages(){this.videoInfo.videoData.season_id?this.PB.toast("这种视频是多集的，暂时未对接api"):this.videoPageList=this.videoInfo.videoData.pages.map((a=>({aid:this.aid,bvid:this.bvid,cid:a.cid,title:a.part})))},openTag(a){},openDetail(a){this.PB.navigateTo(`/pages/main/video/detail?aid=${a.aid}&bvid=${a.bvid}`)},play(a){if(this.PB.isAndroid()){let i={aid:a.aid,cid:a.cid,bvid:a.bvid,title:this.videoInfo.videoData.title};AndroidMain.openVideo(JSON.stringify(i))}else this.PB.navigateTo(`/pages/main/video/play?aid=${a.aid}&cid=${a.cid}&bvid=${a.bvid}`)}}},[["render",function(_,y,g,h,b,I){const P=u,k=c,w=m,D=p(v("my-video-card"),r);return b.videoInfo?(a(),i(k,{key:0},{default:e((()=>[t(k,{class:"my-wrap"},{default:e((()=>[t(k,{class:"my-aid-wrap"},{default:e((()=>[t(k,{class:"my-aid-photo-banner"},{default:e((()=>[t(P,{class:"my-aid-photo-img",mode:"aspectFill",src:I.loadImg(b.videoInfo.videoData.pic)},null,8,["src"])])),_:1}),t(k,{class:"my-aid-info-banner"},{default:e((()=>[t(k,{class:"my-aid-info-title-banner"},{default:e((()=>[d(s(b.videoInfo.videoData.title),1)])),_:1}),t(k,{class:"my-aid-info-upinfo-banner"},{default:e((()=>[t(k,{class:"my-aid-info-upinfo-col"},{default:e((()=>[t(w,{class:"my-tip"},{default:e((()=>[d("UP主：")])),_:1}),t(w,{class:"my-aid-info-upinfo-name"},{default:e((()=>[d(s(b.videoInfo.upData.name),1)])),_:1})])),_:1}),t(k,{class:"my-aid-info-upinfo-col"},{default:e((()=>[t(w,{class:"my-tip"},{default:e((()=>[d("投稿时间：")])),_:1}),t(w,{class:"my-aid-info-upinfo-name"},{default:e((()=>[d(s(new Date(1e3*b.videoInfo.videoData.pubdate).toJSON()),1)])),_:1})])),_:1})])),_:1}),t(k,{class:"my-aid-info-uv-banner"},{default:e((()=>[t(k,{class:"my-aid-info-uv-col"},{default:e((()=>[t(w,{class:"my-tip"},{default:e((()=>[d("播放：")])),_:1}),t(w,{class:"my-aid-info-uv-bofang"},{default:e((()=>[d(s(I.shortNumForBoFang(b.videoInfo.videoData.stat.view)),1)])),_:1})])),_:1}),t(k,{class:"my-aid-info-uv-col"},{default:e((()=>[t(w,{class:"my-tip"},{default:e((()=>[d("弹幕：")])),_:1}),t(w,{class:"my-aid-info-uv-danmu"},{default:e((()=>[d(s(b.videoInfo.videoData.stat.danmaku),1)])),_:1})])),_:1})])),_:1}),t(k,{class:"my-aid-info-tags-banner"},{default:e((()=>[t(k,null,{default:e((()=>[t(w,{class:"my-tip"},{default:e((()=>[d("标签：")])),_:1})])),_:1}),t(k,{class:"my-aid-info-tags-content"},{default:e((()=>[(a(!0),l(n,null,o(b.videoInfo.tags,(t=>(a(),i(k,{key:t.tag_id,onClick:a=>I.openTag(t),class:"my-aid-info-tags-item"},{default:e((()=>[d(s(t.tag_name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1}),t(k,{class:"my-cid-wrap"},{default:e((()=>[t(k,null,{default:e((()=>[t(w,null,{default:e((()=>[d("分集")])),_:1})])),_:1}),t(k,{class:"my-cid-banner"},{default:e((()=>[(a(!0),l(n,null,o(b.videoPageList,(l=>(a(),i(k,{class:"my-cid-item",onClick:a=>I.play(l)},{default:e((()=>[t(k,{class:"my-cid-title"},{default:e((()=>[d(s(l.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1}),t(k,{class:"my-relevant-wrap"},{default:e((()=>[t(k,{class:"my-relevant-tip"},{default:e((()=>[t(w,null,{default:e((()=>[d("相关的")])),_:1})])),_:1}),t(k,{class:"my-relevant-banner","aria-hidden":"true",tabindex:"-1"},{default:e((()=>[(a(!0),l(n,null,o(b.videoInfo.related,(d=>(a(),i(k,{key:d.aid,onClick:a=>I.openDetail(d),class:"my-relevant-item"},{default:e((()=>[t(D,{"img-src":d.pic,title:d.title,"up-name":d.owner.name,"stat-play":d.stat.view,"stat-danmaku":d.stat.danmaku},null,8,["img-src","title","up-name","stat-play","stat-danmaku"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1})):f("",!0)}],["__scopeId","data-v-b55825cc"]]);export{y as default};
